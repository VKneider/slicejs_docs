<div class="documentation-content contextmanagerdocumentation">

<div class="doc-title-bar">
  <h1 id="contextmanager">
    <span class="doc-title-text">ContextManager</span>
    <span class="copy-md-slot" data-copy-md></span>
  </h1>
</div>
<h2 id="overview">Overview</h2>
<p>ContextManager provides shared state across components with watchers and optional persistence. It uses EventManager internally to notify watchers and supports selectors for efficient updates.</p>
<p>Enable it in <code>sliceConfig.json</code> to use <code>slice.context</code>.</p>
<h2 id="enable-contextmanager">Enable ContextManager</h2>
<div class="code-block" data-block-id="doc-block-1"></div>
<h2 id="core-api">Core API</h2>
<div class="table-block" data-block-id="doc-block-2"></div>
<h2 id="context-options">Context Options</h2>
<div class="table-block" data-block-id="doc-block-3"></div>
<h2 id="create-and-read">Create and Read</h2>
<div class="code-block" data-block-id="doc-block-4"></div>
<h2 id="watchers">Watchers</h2>
<p>Watchers are bound to components for auto-cleanup. Pass the component as the second argument.</p>
<div class="code-block" data-block-id="doc-block-5"></div>
<h2 id="selectors-and-derived-data">Selectors and Derived Data</h2>
<p>Selectors run on every update and should be fast and side-effect free. ContextManager performs a shallow comparison of the selected value to decide when to notify.</p>
<div class="code-block" data-block-id="doc-block-6"></div>
<h2 id="persistence">Persistence</h2>
<p>Persist a context to <code>localStorage</code> for session survival.</p>
<div class="code-block" data-block-id="doc-block-7"></div>
<h2 id="functional-updates">Functional Updates</h2>
<p>Use functional updates when new state depends on previous state.</p>
<div class="code-block" data-block-id="doc-block-8"></div>
<h2 id="best-practices">Best Practices</h2>
<div class="callout callout-tip">Keep contexts small and focused by domain.</div>
<div class="callout callout-tip">Use selectors to reduce unnecessary updates.</div>
<h2 id="gotchas">Gotchas</h2>
<div class="callout callout-warning"><code>watch()</code> requires a component with a <code>sliceId</code>. Otherwise it returns <code>null</code>.</div>
<div class="callout callout-warning">Persist only small, serializable state.</div>
</div>
